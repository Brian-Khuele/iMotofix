(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"34aa":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row bookings"},[n("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab",{attrs:{name:"NewBooking",label:"New bookings"}}),n("q-tab",{attrs:{name:"ViewBookings",label:"View bookings"}}),n("q-tab",{attrs:{name:"Pending",label:"Pending bookings"}})],1),n("q-separator"),n("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab-panel",{attrs:{name:"NewBooking"}},[n("div",{staticClass:"text-h6"},[e._v("Booking information")]),n("div",{staticClass:"row tabPanelBookingInfo"},[n("div",{staticClass:"col"},[n("q-form",{ref:"createBooking",staticClass:"formEmail"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("q-input",{ref:"Client_Id",attrs:{outlined:"",label:"Client ID",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Value may not be blank"}]},model:{value:e.booking.Client_Id,callback:function(t){e.$set(e.booking,"Client_Id",t)},expression:"booking.Client_Id"}}),n("q-input",{ref:"Car_Make",attrs:{outlined:"",label:"Car make",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Value may not be blank"}]},model:{value:e.booking.Car_Make,callback:function(t){e.$set(e.booking,"Car_Make",t)},expression:"booking.Car_Make"}}),n("q-input",{ref:"Car_Model",attrs:{outlined:"",label:"Car model",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Value may not be blank"}]},model:{value:e.booking.Car_Model,callback:function(t){e.$set(e.booking,"Car_Model",t)},expression:"booking.Car_Model"}}),n("q-input",{ref:"Car_Year",attrs:{outlined:"",label:"Car year",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Value may not be blank"}]},model:{value:e.booking.Car_Year,callback:function(t){e.$set(e.booking,"Car_Year",t)},expression:"booking.Car_Year"}}),n("q-input",{ref:"Car_VIN",attrs:{outlined:"",label:"Car VIN",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Value may not be blank"}]},model:{value:e.booking.Car_VIN,callback:function(t){e.$set(e.booking,"Car_VIN",t)},expression:"booking.Car_VIN"}}),n("q-input",{ref:"Car_Work_Description",attrs:{outlined:"",label:"Work description. What needs to be done to the vehicle?",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Value may not be blank"}]},model:{value:e.booking.Work_Description,callback:function(t){e.$set(e.booking,"Work_Description",t)},expression:"booking.Work_Description"}})],1),n("div",{staticClass:"col"},[n("q-input",{ref:"BookIn_InspectionNotes",attrs:{outlined:"",label:"Pre booking notes. Car condition before booking in, be as detailed as possible.",type:"textarea",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Value may not be blank"}]},model:{value:e.booking.BookIn_InspectionNotes,callback:function(t){e.$set(e.booking,"BookIn_InspectionNotes",t)},expression:"booking.BookIn_InspectionNotes"}}),n("q-input",{ref:"BelongingsNotes",attrs:{outlined:"",label:"Client belongings at booking (what items are in the car?)",type:"textarea",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Value may not be blank"}]},model:{value:e.booking.BelongingsNotes,callback:function(t){e.$set(e.booking,"BelongingsNotes",t)},expression:"booking.BelongingsNotes"}})],1)])])],1),n("div",{staticClass:"col"},[n("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"Create booking"},on:{click:e.createBooking}})],1)])]),n("q-tab-panel",{attrs:{name:"ViewBookings"}},[n("div",{staticClass:"text-h6"},[e._v("Active & Past bookings")]),n("data-table",{attrs:{endPoint:"/bookings",tableTitle:"Bookings",optionColumns:e.arr}})],1),n("q-tab-panel",{attrs:{name:"Pending"}})],1)],1)},o=[],i=n("c973"),r=n.n(i),s=(n("96cf"),n("a9b0")),l={components:{DataTable:s["a"]},data:function(){return{tab:"NewBooking",booking:{},arr:[]}},methods:{createBooking:function(){var e=this;this.$refs["createBooking"].validate().then(function(){var t=r()(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=13;break}return t.prev=1,t.next=4,e.$axios.post("/bookings",e.booking);case 4:a=t.sent,e.$q.notify(a.data["message"]),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),t.t0.response;case 11:t.next=14;break;case 13:e.$q.notify("Enter all required fields!!");case 14:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$q.notify("BAD")}))}}},c=l,u=(n("435e"),n("2877")),d=n("429b"),p=n("7460"),b=n("eb85"),f=n("adad"),g=n("823b"),m=n("0378"),h=n("27f9"),k=n("9c40"),C=n("eebe"),y=n.n(C),v=Object(u["a"])(c,a,o,!1,null,null,null);t["default"]=v.exports;y()(v,"components",{QTabs:d["a"],QTab:p["a"],QSeparator:b["a"],QTabPanels:f["a"],QTabPanel:g["a"],QForm:m["a"],QInput:h["a"],QBtn:k["a"]})},"435e":function(e,t,n){"use strict";n("f091")},a9b0:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"q-pa-md divContent",staticStyle:{"max-width":"100%"}},[n("q-list",{staticClass:"rounded-borders"},[n("q-expansion-item",{attrs:{"expand-separator":"expand-separator",icon:"view_column",label:"Toggle columns",caption:"Select columns to show/hide"}},[n("q-card",[n("q-card-section",[n("div",{staticClass:"columnToggles"},[e._l(e.columns,(function(t,a){return[n("q-toggle",{key:a,attrs:{val:t.name,label:t.label},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}})]}))],2)])],1)],1),n("q-expansion-item",{attrs:{"expand-separator":"expand-separator",icon:"import_export",label:"Export",caption:"Perform export functions to various formats"}},[n("q-card",[n("q-card-section",[n("q-btn",{staticClass:"btnExport",attrs:{color:"red",label:"PDF"},on:{click:function(t){return e.exportData("pdf")}}}),n("q-btn",{staticClass:"btnExport",attrs:{color:"green",label:"Excel"},on:{click:function(t){return e.exportData("csv")}}})],1)],1)],1)],1),n("hr"),n("q-table",{attrs:{title:e.tableTitle,data:e.data,columns:e.columns,"row-key":"name","visible-columns":e.visibleColumns,dense:"dense",filter:e.filter,"filter-method":e.filterTable,"table-class":"dataTable","table-header-class":"dataTableHeader"},scopedSlots:e._u([{key:"top-right",fn:function(){return[n("div",{staticClass:"col-2 q-table__title"},[n("span",{attrs:{"float-right":""}},[n("button",{attrs:{"float-right":""},on:{click:function(t){e.filter={}}}},[e._v("\n            reset filters\n          ")])])])]},proxy:!0},{key:"header",fn:function(t){return[n("q-tr",{attrs:{props:t}},e._l(t.cols,(function(a){return n("q-th",{key:a.name,attrs:{props:t}},[e._v("\n          "+e._s(a.label)+"\n          "),e.optionColumns.includes(a.name)?n("q-select",{key:a.name,attrs:{outlined:"outlined",dense:"dense",options:e.getSelectionSearchValues(a.name),clearable:""},on:{click:function(e){e.stopPropagation(),e.preventDefault()},input:function(t){return e.startSearch(a.name,t)}},model:{value:e.dropDownFilters[a.name],callback:function(t){e.$set(e.dropDownFilters,a.name,t)},expression:"dropDownFilters[col.name]"}}):n("q-input",{attrs:{outlined:"outlined",dense:"dense",props:t},on:{click:function(e){e.stopPropagation(),e.preventDefault()},input:function(t){return e.startSearch(a.name,t)}},model:{value:a.placeholder,callback:function(t){e.$set(a,"placeholder",t)},expression:"col.placeholder"}})],1)})),1)]}},{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t},on:{click:function(n){return e.rowClicked(n,t)}}},e._l(t.cols,(function(a){return n("q-td",{key:a.name,attrs:{props:t,"auto-width":""}},[e._v("\n          "+e._s(e.getColumnValueDesc(a.name,a.value))+"\n        ")])})),1)]}}])}),e._t("default",null,{selectedPerson:e.selectedPerson,showDialog:e.showDialog,closeDialog:e.closeDialog})],2)},o=[],i=n("448a"),r=n.n(i),s=n("9523"),l=n.n(s),c=n("ded3"),u=n.n(c),d=(n("b64b"),n("d81d"),n("4de4"),n("caad"),n("2532"),n("d3b7"),n("25f0"),n("a4d3"),n("e01a"),n("ac1f"),n("5319"),n("a15b"),n("99af"),n("07ac"),n("e6cf"),n("a79d"),n("1276"),n("b0c0"),n("8baf")),p=n("0da4"),b=n.n(p),f={name:"DataTable",props:{endPoint:{type:String,required:!0},optionColumns:{type:Array,required:!1},tableTitle:{type:String,required:!0}},data:function(){return{filterMsg:"",options:[],model:"",columns:[],data:[],visibleColumns:[""],loading:!1,fullWidth:!1,tab:"WHAT DOES THIS SAY???",selectedPerson:{},dropDownFilters:{},filter:{},searchText:"",filteredData:[],showDialog:!1}},computed:{},methods:{closeDialog:function(){this.showDialog=!1},filterTable:function(e,t){var n=this;try{return this.filteredData=e,0===Object.keys(t).length?e:(Object.keys(t).map((function(a){""!==t[a]&&(n.filteredData=e.filter((function(e){return n.getColumnValueDesc(a,e[a]).toString().toUpperCase().includes(t[a].toString().toUpperCase())})))})),this.filteredData)}catch(a){console.log("error occured")}},rowClicked:function(e,t){this.showDialog=!0,this.selectedPerson=this.data.filter((function(e){return e.student_number==t.row.student_number}))[0]},getSelectionSearchValues:function(e){switch(e.toLowerCase()){case"grade":return this.getGrades.map((function(e){return e.description}));case"gender":return this.getGenders.map((function(e){return e.description}));case"id_type":return this.getIdTypes.map((function(e){return e.description}));case"birth_country":return this.getCountries.map((function(e){return e.description}));case"home_language":return this.getLanguages.map((function(e){return e.description}));case"race":return this.getRaces.map((function(e){return e.description}));case"combination":return this.getCombinations.map((function(e){return e.description}));case"status":return this.getLearnerStatus.map((function(e){return e.description}));default:return[]}},getColumnValueDesc:function(e,t){switch(e){case"grade":return Array(this.getGrades).map((function(e){e.map((function(e){t===e.id&&(t=e.description)}))})),t;case"birth_country":return Array(this.getCountries).map((function(e){e.map((function(e){t===e.id&&(t=e.description)}))})),t;case"combination":return Array(this.getCombinations).map((function(e){e.map((function(e){t===e.id&&(t=e.description)}))})),t;case"gender":return Array(this.getGenders).map((function(e){e.map((function(e){t===e.id&&(t=e.description)}))})),t;case"home_language":return Array(this.getLanguages).map((function(e){e.map((function(e){t===e.id&&(t=e.description)}))})),t;case"id_type":return Array(this.getIdTypes).map((function(e){e.map((function(e){t===e.id&&(t=e.description)}))})),t;case"race":return Array(this.getRaces).map((function(e){e.map((function(e){t===e.id&&(t=e.description)}))})),t;case"status":return Array(this.getLearnerStatus).map((function(e){e.map((function(e){t===e.id&&(t=e.description)}))})),t;default:return t}},startSearch:function(e,t){""!==t&&null!==t?this.filter=u()(u()({},this.filter),{},l()({},e,t)):(delete this.filter[e],this.filter=u()({},this.filter)),0===Object.keys(this.filter).length&&(this.filter={})},exportData:function(e){if(this.formatData(),"pdf"===String(e)){var t=new d["default"]({orientation:"landscape"}),n=this.visibleColumns.map((function(e){return{header:e.replaceAll("_"," "),dataKey:e}}));t.text("Hydra Report",15,10),b()(t,{body:this.filteredData,columns:n,theme:"grid",bodyStyles:{fontSize:10}}),t.save("Hydra report.pdf")}else{var a="Hydra CSV export",o="data:text/csv;charset=utf-8,";o+=[Object.keys(this.filteredData[0]).join(",")].concat(r()(this.filteredData.map((function(e){return Object.values(e).join(",")})))).join("\n").replace(/(^\[)|(\]$)/gm,"");var i=encodeURI(o),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download","".concat(a,".csv")),s.click()}},formatData:function(){var e=this;this.filteredData.map((function(t,n){Object.keys(t).map((function(t){e.filteredData[n][t]=e.getColumnValueDesc(t,e.filteredData[n][t])}))}))}},mounted:function(){var e=this;this.loading=!0,this.$axios.get(this.endPoint).then((function(t){0!=t.data.length&&(e.columns=Object.keys(t.data[0]).map((function(e){return{name:e,label:e.split("_").join(" ").toUpperCase(),field:e,sortable:!0,align:"left"}})),e.visibleColumns=e.columns.reduce((function(e,t,n){return n<=11&&e.push(t.name),r()(e)}),[]),e.data=t.data)})).catch((function(t){e.$q.notify({message:JSON.stringify("error occured ".concat(t))})})).finally((function(){return e.loading=!1}))}},g=f,m=(n("e80b"),n("2877")),h=n("1c1c"),k=n("3b73"),C=n("f09f"),y=n("a370"),v=n("9564"),_=n("9c40"),x=n("eaac"),q=n("bd08"),w=n("357e"),D=n("ddd8"),I=n("27f9"),S=n("db86"),T=n("66e5"),B=n("eebe"),V=n.n(B),Q=Object(m["a"])(g,a,o,!1,null,"27148c91",null);t["a"]=Q.exports;V()(Q,"components",{QList:h["a"],QExpansionItem:k["a"],QCard:C["a"],QCardSection:y["a"],QToggle:v["a"],QBtn:_["a"],QTable:x["a"],QTr:q["a"],QTh:w["a"],QSelect:D["a"],QInput:I["a"],QTd:S["a"],QItem:T["a"]})},cb68:function(e,t,n){},e80b:function(e,t,n){"use strict";n("cb68")},f091:function(e,t,n){}}]);